#!/bin/bash
# chkconfig: 2345 90 60
# description: Start and stop WebGUI Spectre
# processname: spectre

. /data/wre/sbin/setenvironment

start(){
	cd /data/WebGUI/sbin
	perl spectre.pl --daemon >/dev/null 2>&1
	ret=$?
	if [ $ret -eq 0 ]; then
	    	echo Spectre Started
	else
    	    	echo Spectre failed to start!
	fi
	return $ret
}

stop(){
	echo Stopping Spectre
	cd /data/WebGUI/sbin
	perl spectre.pl --shutdown >/dev/null 2>&1
	ret=$?
	if [ $ret -eq 0 ]; then
		echo Spectre Stopped
	else
		echo Spectre failed to stop!
	fi
	return $ret
}

restart(){
	stop
	sleep 3
	start
}


# See how we were called.
case "$1" in
  	start)
    		start
    	;;
  	stop)
    		stop
    	;;
  	restart)
    		restart
    	;;
  	*)
		echo $"Spectre Service Controller"
    		echo $"Usage:"
		echo $"	$0 { start | stop | restart }"
    		exit 1
esac

exit $?
